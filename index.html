<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event HTML Generator</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; padding: 40px; background-color: #f8f9fa; line-height: 1.6; }
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; color: #444; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; }
        button { background: #2563eb; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; }
        button:hover { background: #1d4ed8; }
        
        hr { margin: 40px 0; border: 0; border-top: 1px solid #eee; }
        
        /* Preview Styles */
        .event-card { border: 1px solid #e1e4e8; padding: 20px; border-radius: 8px; background: #fff; }
        .date { color: #6a737d; font-size: 0.9em; display: block; margin-bottom: 8px; }
        .event-card h3 { margin: 12px 0; font-size: 1.5rem; color: #1f2328; }
        
        #output-code { background: #1e1e1e; color: #d4d4d4; padding: 20px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap; font-family: 'Consolas', monospace; font-size: 13px; margin-top: 10px; }
        .copy-btn { background: #059669; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Event Details Form</h2>
    
    <div class="input-group">
        <label>Date &amp; Time</label>
        <input type="text" id="inDate" placeholder="2-4pm on Feb. 28, 2026 Saturday">
    </div>
    
    <div class="input-group">
        <label>Event Title</label>
        <input type="text" id="inTitle" placeholder="2026 I-Ching Society seminar">
    </div>
    
    <div class="input-group">
        <label>Speaker / Description</label>
        <input type="text" id="inSpeaker" placeholder="蔡亞麟">
        <input type="text" id="inTalk" placeholder="專題演講：「我在能量醫學上的見證」" style="margin-top:5px;">
    </div>

    <div class="input-group">
        <label>Location</label>
        <input type="text" id="inLoc" placeholder="華僑文教服務中心 203 室">
    </div>
    
    <div class="input-group">
        <label>Download Filename (Optional)</label>
        <input type="text" id="inLink" placeholder="files/Feb_2026_蔡亞麟.pdf">
    </div>

    <button onclick="generateCard()">Generate Secure Card</button>

    <hr>

    <h3>Preview:</h3>
    <div id="preview"></div>

    <h3>HTML Output:</h3>
    <div id="output-code"></div>
    <button class="copy-btn" id="copyBtn" style="display:none;" onclick="copyCode()">Copy HTML Code</button>
</div>

<script>
    function generateCard() {
        // 1. Clear previous results
        const preview = document.getElementById('preview');
        const codeOutput = document.getElementById('output-code');
        preview.innerHTML = '';
        
        // 2. Create elements using DOM API
        const cardDiv = document.createElement('div');
        cardDiv.className = 'event-card';

        const spanDate = document.createElement('span');
        spanDate.className = 'date';
        spanDate.textContent = document.getElementById('inDate').value;

        const h3 = document.createElement('h3');
        h3.textContent = document.getElementById('inTitle').value;

        // Speaker P tag
        const pSpeaker = document.createElement('p');
        const strong = document.createElement('strong');
        strong.textContent = ` ${document.getElementById('inSpeaker').value} `;
        pSpeaker.appendChild(strong);
        pSpeaker.append(` ${document.getElementById('inTalk').value}`);

        // Location P tag
        const pLoc = document.createElement('p');
        pLoc.textContent = `地點：${document.getElementById('inLoc').value}`;

        // Assemble the card
        cardDiv.appendChild(spanDate);
        cardDiv.appendChild(h3);
        cardDiv.appendChild(pSpeaker);

        // Optional Link
        const linkVal = document.getElementById('inLink').value;
        if (linkVal) {
            const pLink = document.createElement('p');
            const a = document.createElement('a');
            a.href = linkVal;
            a.textContent = 'download';
            pLink.appendChild(a);
            cardDiv.appendChild(pLink);
        }

        cardDiv.appendChild(pLoc);

        // 3. Show in preview
        preview.appendChild(cardDiv);

        // 4. Show code output (formatted for readability)
        // We use .outerHTML to show the string representation of the DOM we just built
        const formattedCode = cardDiv.outerHTML
            .replace(/> </g, '>\n  <')
            .replace(/<\/div>/, '\n</div>')
            .replace(/<p/g, '\n  <p')
            .replace(/<h3/g, '\n  <h3')
            .replace(/<span/g, '\n  <span');
            
        codeOutput.textContent = formattedCode;
        document.getElementById('copyBtn').style.display = 'inline-block';
    }

    function copyCode() {
        const code = document.getElementById('output-code').textContent;
        navigator.clipboard.writeText(code).then(() => {
            alert('HTML copied!');
        });
    }
</script>

</body>
</html>
